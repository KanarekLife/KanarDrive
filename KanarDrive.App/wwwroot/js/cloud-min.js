function getSessionStorage(){return JSON.parse(window.sessionStorage.getItem("selectedFiles"))||[]}function setSessionStorage(e){window.sessionStorage.setItem("selectedFiles",JSON.stringify(e))}function onLoad(){$("#file-uploader").fileinput({language:"pl",theme:"fas",showUpload:!0,uploadUrl:"/cloud/upload",uploadExtraData:{path:window.location.pathname}}).on("fileuploaded",()=>location.reload());let e=getSessionStorage();const t=document.getElementById("selectedAmount");null!==t&&(t.textContent=e.length.toString()),e.forEach(e=>{const t=document.getElementById(e+"-checkbox");null!==t&&(t.checked=!0)})}function selectFile(e){let t=getSessionStorage();t.includes(e)?t=t.filter(t=>t!==e):t.push(e),document.getElementById("selectedAmount").textContent=t.length.toString(),setSessionStorage(t)}async function createDirectory(){const e=prompt("Wpisz nazwę nowego folderu","Nowy folder");null!==e&&await fetch(`/cloud/create-directory?path=${window.location.pathname}&name=${e}`,{method:"POST"}).then(e=>{e.ok?location.reload():alert("Wystąpił błąd podczas tworzenia nowego folderu!!!")})}async function removeFile(e){confirm("Czy jesteś pewnien że chcesz usunąć ten plik?")&&await fetch(`/cloud/delete-file?id=${e}`,{method:"DELETE"}).then(e=>{e.ok?location.reload():alert("Wystąpił błąd podczas usuwania pliku!!!")})}async function removeFiles(){const e=getSessionStorage();if(confirm("Czy jesteś pewnien że chcesz usunąć te pliki?"))for(const t of e)await fetch(`/cloud/delete-file?id=${t}`,{method:"DELETE"}).then(e=>{e.ok||alert("Wystąpił błąd podczas usuwania pliku!!!")});setSessionStorage([]),location.reload()}async function removeFolder(e){confirm("Czy jesteś pewnien że chcesz usunąć ten folder?")&&await fetch(`/cloud/delete-folder?id=${e}`,{method:"DELETE"}).then(e=>{e.ok?location.reload():alert("Wystąpił błąd podczas usuwania pliku (czy usunąłeś wszystkie pliki z folderu?)!!!")})}async function moveFiles(){const e=window.location.pathname,t=getSessionStorage();if(confirm("Czy jesteś pewnien że chcesz przenieść te pliki?"))for(const o of t)await fetch(`/cloud/move?id=${o}&newPath=${e}`,{method:"PUT"}).then(async e=>{e.ok||alert("Wystąpił błąd podczas przenoszenia pliku!!!")});setSessionStorage([]),location.reload()}async function renameFile(e,t){const o=prompt("Wpisz nową nazwę pliku: (Uwaga pamiętaj też o rozszerzeniu!)",t);null!==o&&await fetch(`/cloud/rename?id=${e}&newName=${o}`,{method:"PUT"}).then(e=>{e.ok?location.reload():alert("Wystąpił błąd podczas zmiany nazwy pliku!!!")})}async function share(e){await fetch(`/cloud/share?id=${e}`,{method:"PUT"}).then(t=>{if(t.ok){const t=document.getElementById(`${e}-share`);"Udostępniony"===t.textContent?t.textContent="Nieudostępniony":t.textContent="Udostępniony"}else alert("Wystąpił błąd podczas zmiany statusu udostępnienia!")})}onLoad();